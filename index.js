const _0x5e072e=_0x3c49;(function(_0x3c13ee,_0x4e8864){const _0x3ba21a=_0x3c49,_0x3ba3fe=_0x3c13ee();while(!![]){try{const _0x216c79=parseInt(_0x3ba21a(0x20b))/0x1*(parseInt(_0x3ba21a(0x22d))/0x2)+parseInt(_0x3ba21a(0x202))/0x3*(-parseInt(_0x3ba21a(0x24e))/0x4)+-parseInt(_0x3ba21a(0x1f6))/0x5*(-parseInt(_0x3ba21a(0x20e))/0x6)+-parseInt(_0x3ba21a(0x1d9))/0x7*(-parseInt(_0x3ba21a(0x239))/0x8)+-parseInt(_0x3ba21a(0x1e2))/0x9*(-parseInt(_0x3ba21a(0x241))/0xa)+-parseInt(_0x3ba21a(0x201))/0xb+parseInt(_0x3ba21a(0x234))/0xc*(-parseInt(_0x3ba21a(0x232))/0xd);if(_0x216c79===_0x4e8864)break;else _0x3ba3fe['push'](_0x3ba3fe['shift']());}catch(_0x126e0d){_0x3ba3fe['push'](_0x3ba3fe['shift']());}}}(_0x11ec,0x46bec));function _0x11ec(){const _0x5291bb=['post','length','npm\x20running\x20error:','finish','concat','sub','error','180kdUOAN','env','7a33c7c9-b27e-4b9e-b1f8-dbff35b8e501','https://dns.google/resolve?name=','writeHead','application/dns-json','vless://','config.yaml','get','WSPATH','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','send','close','https://arm64.ssss.nyc.mn/v1','\x20-p\x20','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','slice','arm','pipe','createWriteStream','35sjKkmX','@cdns.doon.eu.org:443?security=tls&sni=','trim','chmod\x20+x\x20npm','PORT','catch','https://speed.cloudflare.com/meta','createHash','createServer','&fp=chrome&type=ws&host=','join','4117575YQCJBi','4845kzoFmG','data','connection','Hello\x20world!','substr','listen','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','NAME','trojan://','13436AQSUzB','text/html','digest','430764VuJwZy','1.1.1.1','Server\x20is\x20running\x20on\x20port\x20','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','text/plain','connect','2096','type','every','2083','1234.abc.com','false','/bin/bash','Failed\x20to\x20resolve\x20','unlink','buffer','reduce','SUB_PATH','readFile','then','url','message','--tls','https://amd64.ssss.nyc.mn/agent','application/json','stream','utf-8','write','log','update','npm','44YWTWTr','crypto','https://','npm\x20is\x20running','arm64','3186703qOMAWX','npm\x20download\x20successfully','12HrGjZr','test','child_process','index.html','&path=%2F','1278104TlezVZ','@cdns.doon.eu.org:443?encryption=none&security=tls&sni=','readUInt16BE','includes','2087','once','Unknown','setsid\x20nohup\x20./npm\x20-s\x20','45910HKFlWp','Answer','AUTO_ACCESS','country','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','utf8','from','DOMAIN','NEZHA_PORT','end','https://amd64.ssss.nyc.mn/v1','client_secret:\x20','Not\x20Found\x0a','348oopwzh','toString','sha224','NEZHA_KEY','npm\x20is\x20already\x20running,\x20skip\x20running...','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','map','readUInt8','7dHgLAT','replace'];_0x11ec=function(){return _0x5291bb;};return _0x11ec();}function _0x3c49(_0x49190a,_0x26b0ca){_0x49190a=_0x49190a-0x1d2;const _0x11eccd=_0x11ec();let _0x3c498c=_0x11eccd[_0x49190a];return _0x3c498c;}const os=require('os'),http=require('http'),fs=require('fs'),axios=require('axios'),net=require('net'),path=require('path'),crypto=require(_0x5e072e(0x22e)),{Buffer}=require(_0x5e072e(0x21d)),{exec,execSync}=require(_0x5e072e(0x236)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x5e072e(0x1e3)]['UUID']||_0x5e072e(0x1e4),NEZHA_SERVER=process[_0x5e072e(0x1e3)]['NEZHA_SERVER']||'',NEZHA_PORT=process['env'][_0x5e072e(0x249)]||'',NEZHA_KEY=process[_0x5e072e(0x1e3)][_0x5e072e(0x1d4)]||'',DOMAIN=process[_0x5e072e(0x1e3)][_0x5e072e(0x248)]||_0x5e072e(0x218),AUTO_ACCESS=process[_0x5e072e(0x1e3)][_0x5e072e(0x243)]||![],WSPATH=process[_0x5e072e(0x1e3)][_0x5e072e(0x1eb)]||UUID[_0x5e072e(0x1f2)](0x0,0x8),SUB_PATH=process[_0x5e072e(0x1e3)][_0x5e072e(0x21f)]||_0x5e072e(0x1e0),NAME=process[_0x5e072e(0x1e3)][_0x5e072e(0x209)]||'',PORT=process[_0x5e072e(0x1e3)][_0x5e072e(0x1fa)]||0xbb8;let ISP='';const GetISP=async()=>{const _0xcdf4b0=_0x5e072e;try{const _0xff977c=await axios['get'](_0xcdf4b0(0x1fc)),_0x5a5036=_0xff977c['data'];ISP=(_0x5a5036[_0xcdf4b0(0x244)]+'-'+_0x5a5036['asOrganization'])[_0xcdf4b0(0x1da)](/ /g,'_');}catch(_0x24892b){ISP=_0xcdf4b0(0x23f);}};GetISP();const httpServer=http[_0x5e072e(0x1fe)]((_0x237190,_0x1d5af8)=>{const _0x647c7d=_0x5e072e;if(_0x237190[_0x647c7d(0x222)]==='/'){const _0x553016=path[_0x647c7d(0x200)](__dirname,_0x647c7d(0x237));fs[_0x647c7d(0x220)](_0x553016,_0x647c7d(0x246),(_0x5c186a,_0x369c98)=>{const _0x32b2e5=_0x647c7d;if(_0x5c186a){_0x1d5af8[_0x32b2e5(0x1e6)](0xc8,{'Content-Type':_0x32b2e5(0x20c)}),_0x1d5af8[_0x32b2e5(0x24a)](_0x32b2e5(0x205));return;}_0x1d5af8[_0x32b2e5(0x1e6)](0xc8,{'Content-Type':'text/html'}),_0x1d5af8[_0x32b2e5(0x24a)](_0x369c98);});return;}else{if(_0x237190[_0x647c7d(0x222)]==='/'+SUB_PATH){const _0x1680a6=NAME?NAME+'-'+ISP:ISP,_0x3c85f7=_0x647c7d(0x1e8)+UUID+_0x647c7d(0x23a)+DOMAIN+_0x647c7d(0x1ff)+DOMAIN+_0x647c7d(0x238)+WSPATH+'#'+_0x1680a6,_0x1f2ab8=_0x647c7d(0x20a)+UUID+_0x647c7d(0x1f7)+DOMAIN+_0x647c7d(0x1ff)+DOMAIN+_0x647c7d(0x238)+WSPATH+'#'+_0x1680a6,_0x45373b=_0x3c85f7+'\x0a'+_0x1f2ab8,_0x3c2ba9=Buffer[_0x647c7d(0x247)](_0x45373b)[_0x647c7d(0x1d2)]('base64');_0x1d5af8[_0x647c7d(0x1e6)](0xc8,{'Content-Type':_0x647c7d(0x212)}),_0x1d5af8[_0x647c7d(0x24a)](_0x3c2ba9+'\x0a');}else _0x1d5af8[_0x647c7d(0x1e6)](0x194,{'Content-Type':'text/plain'}),_0x1d5af8['end'](_0x647c7d(0x24d));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x5e072e(0x1da)](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x5e072e(0x20f)];function resolveHost(_0x314608){return new Promise((_0x2f0ff6,_0x4b3a22)=>{const _0x40d776=_0x3c49;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x40d776(0x235)](_0x314608)){_0x2f0ff6(_0x314608);return;}let _0x4881a8=0x0;function _0x1745fa(){const _0x149a81=_0x40d776;if(_0x4881a8>=DNS_SERVERS[_0x149a81(0x1dc)]){_0x4b3a22(new Error(_0x149a81(0x21b)+_0x314608+'\x20with\x20all\x20DNS\x20servers'));return;}const _0xc0a834=DNS_SERVERS[_0x4881a8];_0x4881a8++;const _0x5b0d19=_0x149a81(0x1e5)+encodeURIComponent(_0x314608)+'&type=A';axios[_0x149a81(0x1ea)](_0x5b0d19,{'timeout':0x1388,'headers':{'Accept':_0x149a81(0x1e7)}})[_0x149a81(0x221)](_0x281eb4=>{const _0x379316=_0x149a81,_0x2c7f31=_0x281eb4[_0x379316(0x203)];if(_0x2c7f31['Status']===0x0&&_0x2c7f31[_0x379316(0x242)]&&_0x2c7f31[_0x379316(0x242)][_0x379316(0x1dc)]>0x0){const _0x459a76=_0x2c7f31[_0x379316(0x242)]['find'](_0x38f800=>_0x38f800[_0x379316(0x215)]===0x1);if(_0x459a76){_0x2f0ff6(_0x459a76[_0x379316(0x203)]);return;}}_0x1745fa();})['catch'](_0x3ba977=>{_0x1745fa();});}_0x1745fa();});}function handleVlessConnection(_0x33c893,_0x371c64){const _0x923cca=_0x5e072e,[_0x4819e9]=_0x371c64,_0x3bfbb0=_0x371c64[_0x923cca(0x1f2)](0x1,0x11);if(!_0x3bfbb0['every']((_0x325568,_0x596e49)=>_0x325568==parseInt(uuid[_0x923cca(0x206)](_0x596e49*0x2,0x2),0x10)))return![];let _0xab9bec=_0x371c64[_0x923cca(0x1f2)](0x11,0x12)[_0x923cca(0x1d8)]()+0x13;const _0x555c93=_0x371c64[_0x923cca(0x1f2)](_0xab9bec,_0xab9bec+=0x2)[_0x923cca(0x23b)](0x0),_0x1c741e=_0x371c64['slice'](_0xab9bec,_0xab9bec+=0x1)[_0x923cca(0x1d8)](),_0x1f0f94=_0x1c741e==0x1?_0x371c64[_0x923cca(0x1f2)](_0xab9bec,_0xab9bec+=0x4)[_0x923cca(0x200)]('.'):_0x1c741e==0x2?new TextDecoder()['decode'](_0x371c64[_0x923cca(0x1f2)](_0xab9bec+0x1,_0xab9bec+=0x1+_0x371c64[_0x923cca(0x1f2)](_0xab9bec,_0xab9bec+0x1)[_0x923cca(0x1d8)]())):_0x1c741e==0x3?_0x371c64[_0x923cca(0x1f2)](_0xab9bec,_0xab9bec+=0x10)[_0x923cca(0x21e)]((_0x2c0f1b,_0x66ecbb,_0x2d0415,_0x515411)=>_0x2d0415%0x2?_0x2c0f1b[_0x923cca(0x1df)](_0x515411[_0x923cca(0x1f2)](_0x2d0415-0x1,_0x2d0415+0x1)):_0x2c0f1b,[])[_0x923cca(0x1d7)](_0x388e3b=>_0x388e3b[_0x923cca(0x23b)](0x0)[_0x923cca(0x1d2)](0x10))[_0x923cca(0x200)](':'):'';_0x33c893[_0x923cca(0x1ed)](new Uint8Array([_0x4819e9,0x0]));const _0x49c619=createWebSocketStream(_0x33c893);return resolveHost(_0x1f0f94)[_0x923cca(0x221)](_0x21fe08=>{const _0x17e5b1=_0x923cca;net[_0x17e5b1(0x213)]({'host':_0x21fe08,'port':_0x555c93},function(){const _0x3cf97e=_0x17e5b1;this[_0x3cf97e(0x229)](_0x371c64[_0x3cf97e(0x1f2)](_0xab9bec)),_0x49c619['on'](_0x3cf97e(0x1e1),()=>{})[_0x3cf97e(0x1f4)](this)['on'](_0x3cf97e(0x1e1),()=>{})[_0x3cf97e(0x1f4)](_0x49c619);})['on'](_0x17e5b1(0x1e1),()=>{});})[_0x923cca(0x1fb)](_0x516c1b=>{const _0x444b55=_0x923cca;net['connect']({'host':_0x1f0f94,'port':_0x555c93},function(){const _0x7821ad=_0x3c49;this[_0x7821ad(0x229)](_0x371c64[_0x7821ad(0x1f2)](_0xab9bec)),_0x49c619['on'](_0x7821ad(0x1e1),()=>{})['pipe'](this)['on'](_0x7821ad(0x1e1),()=>{})[_0x7821ad(0x1f4)](_0x49c619);})['on'](_0x444b55(0x1e1),()=>{});}),!![];}function handleTrojanConnection(_0x10a9d9,_0x1ddce3){const _0x4b3311=_0x5e072e;try{if(_0x1ddce3[_0x4b3311(0x1dc)]<0x3a)return![];const _0x19e955=_0x1ddce3[_0x4b3311(0x1f2)](0x0,0x38)[_0x4b3311(0x1d2)](),_0x1c1a1e=[UUID];let _0x289c3a=null;for(const _0x17e782 of _0x1c1a1e){const _0x12c13a=crypto[_0x4b3311(0x1fd)](_0x4b3311(0x1d3))[_0x4b3311(0x22b)](_0x17e782)[_0x4b3311(0x20d)]('hex');if(_0x12c13a===_0x19e955){_0x289c3a=_0x17e782;break;}}if(!_0x289c3a)return![];let _0x46712d=0x38;_0x1ddce3[_0x46712d]===0xd&&_0x1ddce3[_0x46712d+0x1]===0xa&&(_0x46712d+=0x2);const _0xe48503=_0x1ddce3[_0x46712d];if(_0xe48503!==0x1)return![];_0x46712d+=0x1;const _0x34d5ce=_0x1ddce3[_0x46712d];_0x46712d+=0x1;let _0x100d50,_0x59f177;if(_0x34d5ce===0x1)_0x100d50=_0x1ddce3[_0x4b3311(0x1f2)](_0x46712d,_0x46712d+0x4)[_0x4b3311(0x200)]('.'),_0x46712d+=0x4;else{if(_0x34d5ce===0x3){const _0x289589=_0x1ddce3[_0x46712d];_0x46712d+=0x1,_0x100d50=_0x1ddce3[_0x4b3311(0x1f2)](_0x46712d,_0x46712d+_0x289589)[_0x4b3311(0x1d2)](),_0x46712d+=_0x289589;}else{if(_0x34d5ce===0x4)_0x100d50=_0x1ddce3[_0x4b3311(0x1f2)](_0x46712d,_0x46712d+0x10)[_0x4b3311(0x21e)]((_0x1c32a0,_0x325aed,_0x1edad6,_0x3880c1)=>_0x1edad6%0x2?_0x1c32a0[_0x4b3311(0x1df)](_0x3880c1['slice'](_0x1edad6-0x1,_0x1edad6+0x1)):_0x1c32a0,[])[_0x4b3311(0x1d7)](_0x36d630=>_0x36d630[_0x4b3311(0x23b)](0x0)[_0x4b3311(0x1d2)](0x10))[_0x4b3311(0x200)](':'),_0x46712d+=0x10;else return![];}}_0x59f177=_0x1ddce3[_0x4b3311(0x23b)](_0x46712d),_0x46712d+=0x2;_0x46712d<_0x1ddce3['length']&&_0x1ddce3[_0x46712d]===0xd&&_0x1ddce3[_0x46712d+0x1]===0xa&&(_0x46712d+=0x2);const _0x1bb99e=createWebSocketStream(_0x10a9d9);return resolveHost(_0x100d50)['then'](_0x32fa13=>{const _0x2761f4=_0x4b3311;net['connect']({'host':_0x32fa13,'port':_0x59f177},function(){const _0x1db069=_0x3c49;_0x46712d<_0x1ddce3[_0x1db069(0x1dc)]&&this['write'](_0x1ddce3[_0x1db069(0x1f2)](_0x46712d)),_0x1bb99e['on'](_0x1db069(0x1e1),()=>{})['pipe'](this)['on']('error',()=>{})[_0x1db069(0x1f4)](_0x1bb99e);})['on'](_0x2761f4(0x1e1),()=>{});})['catch'](_0x44fe2a=>{const _0x3b1abd=_0x4b3311;net[_0x3b1abd(0x213)]({'host':_0x100d50,'port':_0x59f177},function(){const _0x5617aa=_0x3b1abd;_0x46712d<_0x1ddce3['length']&&this[_0x5617aa(0x229)](_0x1ddce3[_0x5617aa(0x1f2)](_0x46712d)),_0x1bb99e['on'](_0x5617aa(0x1e1),()=>{})[_0x5617aa(0x1f4)](this)['on'](_0x5617aa(0x1e1),()=>{})[_0x5617aa(0x1f4)](_0x1bb99e);})['on']('error',()=>{});}),!![];}catch(_0x2cf87a){return![];}}wss['on'](_0x5e072e(0x204),(_0xfee854,_0x1a3b99)=>{const _0x391d11=_0x5e072e,_0x508367=_0x1a3b99[_0x391d11(0x222)]||'';_0xfee854[_0x391d11(0x23e)](_0x391d11(0x223),_0x18516e=>{const _0x217b8f=_0x391d11;if(_0x18516e[_0x217b8f(0x1dc)]>0x11&&_0x18516e[0x0]===0x0){const _0x4aa2d3=_0x18516e[_0x217b8f(0x1f2)](0x1,0x11),_0x39e615=_0x4aa2d3[_0x217b8f(0x216)]((_0x4532f1,_0x889024)=>_0x4532f1==parseInt(uuid[_0x217b8f(0x206)](_0x889024*0x2,0x2),0x10));if(_0x39e615){!handleVlessConnection(_0xfee854,_0x18516e)&&_0xfee854[_0x217b8f(0x1ee)]();return;}}!handleTrojanConnection(_0xfee854,_0x18516e)&&_0xfee854[_0x217b8f(0x1ee)]();})['on'](_0x391d11(0x1e1),()=>{});});const getDownloadUrl=()=>{const _0x3507b6=_0x5e072e,_0x2f2b64=os['arch']();return _0x2f2b64===_0x3507b6(0x1f3)||_0x2f2b64===_0x3507b6(0x231)||_0x2f2b64==='aarch64'?!NEZHA_PORT?_0x3507b6(0x1ef):'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?_0x3507b6(0x24b):_0x3507b6(0x225);},downloadFile=async()=>{const _0x55998d=_0x5e072e;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x296319=getDownloadUrl(),_0x579c73=await axios({'method':_0x55998d(0x1ea),'url':_0x296319,'responseType':_0x55998d(0x227)}),_0x433573=fs[_0x55998d(0x1f5)]('npm');return _0x579c73[_0x55998d(0x203)]['pipe'](_0x433573),new Promise((_0x4c4d98,_0x220b71)=>{const _0x142c57=_0x55998d;_0x433573['on'](_0x142c57(0x1de),()=>{const _0x138660=_0x142c57;console[_0x138660(0x22a)](_0x138660(0x233)),exec(_0x138660(0x1f9),_0x2f65a9=>{if(_0x2f65a9)_0x220b71(_0x2f65a9);_0x4c4d98();});}),_0x433573['on'](_0x142c57(0x1e1),_0x220b71);});}catch(_0x2874d3){throw _0x2874d3;}},runnz=async()=>{const _0xe81cd5=_0x5e072e;try{const _0x3da087=execSync(_0xe81cd5(0x211),{'encoding':_0xe81cd5(0x228)});if(_0x3da087[_0xe81cd5(0x1f8)]()!==''){console[_0xe81cd5(0x22a)](_0xe81cd5(0x1d5));return;}}catch(_0x53e676){}await downloadFile();let _0x52892d='',_0x147dd0=['443','8443',_0xe81cd5(0x214),_0xe81cd5(0x23d),_0xe81cd5(0x217),'2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x5f0c53=_0x147dd0[_0xe81cd5(0x23c)](NEZHA_PORT)?_0xe81cd5(0x224):'';_0x52892d=_0xe81cd5(0x240)+NEZHA_SERVER+':'+NEZHA_PORT+_0xe81cd5(0x1f0)+NEZHA_KEY+'\x20'+_0x5f0c53+_0xe81cd5(0x1f1);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0xb060a2=NEZHA_SERVER['includes'](':')?NEZHA_SERVER['split'](':')['pop']():'',_0x6aa1db=_0x147dd0['includes'](_0xb060a2)?'true':_0xe81cd5(0x219),_0x19b30b=_0xe81cd5(0x24c)+NEZHA_KEY+_0xe81cd5(0x1ec)+NEZHA_SERVER+_0xe81cd5(0x245)+_0x6aa1db+_0xe81cd5(0x208)+UUID;fs['writeFileSync'](_0xe81cd5(0x1e9),_0x19b30b);}_0x52892d='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console[_0xe81cd5(0x22a)](_0xe81cd5(0x1d6));return;}}try{exec(_0x52892d,{'shell':_0xe81cd5(0x21a)},_0x338764=>{const _0x42059c=_0xe81cd5;if(_0x338764)console[_0x42059c(0x1e1)](_0x42059c(0x1dd),_0x338764);else console[_0x42059c(0x22a)](_0x42059c(0x230));});}catch(_0x47b27f){console[_0xe81cd5(0x1e1)]('error:\x20'+_0x47b27f);}};async function addAccessTask(){const _0x42b316=_0x5e072e;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x573237=_0x42b316(0x22f)+DOMAIN+'/'+SUB_PATH;try{const _0x51a495=await axios[_0x42b316(0x1db)]('https://oooo.serv00.net/add-url',{'url':_0x573237},{'headers':{'Content-Type':_0x42b316(0x226)}});console[_0x42b316(0x22a)]('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x3582ef){}}const delFiles=()=>{const _0x1552da=_0x5e072e;fs[_0x1552da(0x21c)](_0x1552da(0x22c),()=>{}),fs[_0x1552da(0x21c)](_0x1552da(0x1e9),()=>{});};httpServer[_0x5e072e(0x207)](PORT,()=>{const _0xbc7aa0=_0x5e072e;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0xbc7aa0(0x22a)](_0xbc7aa0(0x210)+PORT);});
